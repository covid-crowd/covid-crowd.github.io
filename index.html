<!DOCTYPE html>
<html>
<!-- using code from https://www.w3schools.com/howto/tryit.asp?filename=tryhow_js_tabs -->
  <head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Crowdsourcing COVID-19 Information">
  <title>Crowdsourcing COVID-19 Information</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="style.css">
  </head>

  <body>
    <div class="container" id="container">
      
      <div style="text-align: center; padding-top: 15px; padding-bottom: 15px">
        <div style="text-align: left;  display: inline-block;">
          <img src="img/stanfordcs.png" style="height:70px;  border-style: solid">
        </div>

        <div style="text-align: right; display: inline-block;">
          <img src="img/uva.png" style="height:70px; border-style: solid">
        </div>
      </div>

      <h2>Crowdsourcing Info on COVID-19</h2>

      <h5 style="padding-top: 15px">In order to respond effectively to COVID-19, scientists need to contruct models of how it spreads and what policies can effectively contain it. Since different rules are being enacted by all 3000+ counties in the United States, we need volunteers like you to help us gather information on exactly what's happening around the country.</h5> 
      <p> We are a team of computer scientists and epidemiologists from Stanford University and the University of Virginia. The information you find will be used to create models that we will share with the public, the Centers for Disease Control and Prevention, and the Department of Defense.</p>
      
      <div style="text-align: center; width:100%">
          <a href="#survey" type="button" class="btn btn-danger btn-lg btn-padded">Add information about social distancing in your own community!</a>
      </div>

       
      <br> 
      
      <div id="results">
        <h3>Results</h3>
          
          <p> Counties in <b class="status-2"> green</b> have complete info, counties in <b class="status-1">yellow</b> need answers from local residents, and <b class="status-0">uncolored</b> counties need your help!</p>
          <p style="color:red"> To be completed. Right now you can toggle between NY and California by clicking those states on the map, and see details for Santa Clara county by clicking on the county name in the list that appears.</p>
          <div style="text-align: center;">
            <h4> We currently have data about <b class="text-link">1/3142</b> US counties! </h4>
            <p> <b>Click on a state</b> to find data for your own county!</p>
          </div>

          <div id="mapcontainer"></div>

          <div id="california-info">          
            <h4> California </h4>          
            <!-- <p> <b>Statewide info:</b> [PUT URLS HERE]</p> -->

            <p><b class="status-1">We have partial data from these counties, but need more info from residents.</b><span id="santa-clara-link" class="text-link"> Santa Clara County.</span></p>

            <p><b class="status-0">We need data on 57 more counties in this state, anyone can volunteer!</b></p>
          </div>
          <div id="new-york-info" style="display: none">          
            <h4> New York </h4>          
            <!-- <p> <b>Statewide info:</b> [PUT URLS HERE]</p> -->

            <p><b class="status-0">We need data on 62 more counties in this state, anyone can volunteer!</b></p>
          </div>
          <div id="santa-clara-info" style="display: none">          
            

          </div>

      </div>

      <div id="survey">
          <h3>Survey</h3>
          <p id="element_above_survey"> Help us build better models of COVID-19 by providing data on social distancing across the country in the survey below!</p>
          <iframe id="iframe" src="https://stanforduniversity.qualtrics.com/jfe/form/SV_3fLPgUUFUpZrsWh" width="100%" height="1600px"></iframe>
      </div>
    
    <div id="faq">
          <h3>FAQ</h3>
          <br>
          <h4>Who are you?</h4>
          <p>We are a team of computer scientists and epidemiologists who are assisting the CDC, DOD, and state officials in their COVID-19 planning and response efforts, and their work is briefed to senior federal officials. The epidemiologists on our team have previously supported responses to the 2009 flu pandemic and other epidemiological crises. Funding for this project was provided by a <a class="text-link" href="https://computational-epidemiology.org/">National Science Foundation Expeditions Grant</a>.</p>
          <p style="padding-top: 15px">
            <b>Our team</b>: Jacob Ritchie, Tum Chaturapruek, Mark Whiting, J.D. Zamfirescu-Pereira, Mitchell Gordon, Catherine Mullings, Amy Zhang, Golrokh Emami, DanaÃ« Metaxa, Rajan Vaish, Mandy Wilson, Achla Marathe, Stephen Eubanks, Madhav Marathe, Michael Bernstein
          </p>
          <h4>How is this data collected and verified?</h4>
          <p>All the data on this site has been collected from public news sources and government communications, either by our team or by volunteers like you. We manually check all the data contributed by volunteers. If you have found data that is incorrect or out of date, please let us know using <a href="#">this form</a>.</p>
      </div>

    </div>
     
  </body>

  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="//d3js.org/topojson.v3.min.js"></script>

  <script type="text/javascript" src="graphs.js"></script>
  <script type="text/javascript">
    window.addEventListener("message", receiveMessage, false);
    var first_message = true;
    function receiveMessage(event) {
      
      if (event.origin == "https://stanforduniversity.qualtrics.com") {
        console.log("message received");
        
        if (first_message == true){
            first_message = false
        }
        else {
          document.getElementById("iframe").scrollIntoView();
        }

        var iframe = document.getElementById("iframe");
        
        console.log(event.data)
        iframe.setAttribute("style", "height:" + event.data + "px");

      }
    }
  </script>

</html> 